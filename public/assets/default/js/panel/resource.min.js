// $('body').on('click', '#saveAndPublish', function (e) {
//   e.preventDefault();
//   $('#forDraft').val('publish'); // Set value to 'publish'
//   $('#webinarForm').trigger('submit');
// });

// $('body').on('click', '#saveAsDraft', function (e) {
//   e.preventDefault();
//   $('#forDraft').val(1);
//   $('#webinarForm').trigger('submit');
// });

// $('body').on('click', '#saveReject', function (e) {
//   e.preventDefault();
//   $('#forDraft').val('reject');
//   $('#webinarForm').trigger('submit');
// });


function getFiltersOptions(option) {
  if (option.translations.length > 0) {
      return option.translations[0].title;
  } else {
      // Jika tidak ada terjemahan, kembalikan judul asli
      return option.title;
  }
}

function getTranslatedTitle(filter) {
  if (filter.translations.length > 0) {
      return filter.translations[0].title;
  } else {
      // Jika tidak ada terjemahan, kembalikan judul asli
      return filter.title;
  }
}

$('#partnerInstructorSwitch').on('change.bootstrapSwitch', function (e) {
  var isChecked = e.target.checked;

  if (isChecked) {
    $('#partnerInstructorInput').removeClass('d-none');
    handleSearchableSelect2('js-search-partner-user', adminPanelPrefix + '/users/search', 'name');
  } else {
    $('#partnerInstructorInput').addClass('d-none');
  }
});

$('body').on('change', '#categories', function (e) {
  e.preventDefault();
  var category_id = this.value;
  // Fungsi utama untuk memproses data filter
  $.get(adminPanelPrefix + '/filters/get-by-category-id/' + category_id, function (result) {
      // console.log(result); // Debug hasil permintaan AJAX
      if (result && typeof result.filters !== "undefined" && result.filters.length) {
          var html = '';
          result.filters.forEach(function (filter) {
              var options = filter.options;

              html += '<div class="col-12 col-md-3">\n' +
                  '<div class="webinar-category-filters mb-15">\n' +
                  '<strong class="category-filter-title d-block">' + filter.translations[0].title + '</strong>\n' +
                  '<div class="py-10"></div>\n';
                  
                  console.log("Options:", options);
              if (options.length) {
                  options.forEach(function (option) {
                      html += '<div class="form-group mt-20 d-flex align-items-center justify-content-between">\n' + 
                              '<label class="" for="filterOption' + option.value + '">' + getTranslatedTitle(option) + '</label>\n' + 
                              '<div class="custom-control custom-checkbox">\n' + 
                              '<input type="checkbox" name="filters[]" value="' + option.id + '" class="custom-control-input" id="filterOption' + option.id + '">\n' + 
                              '<label class="custom-control-label" for="filterOption' + option.id + '"></label>\n' + 
                              '</div>\n' + 
                              '</div>\n';
                  });
              }

              html += '</div></div>';
          });
          $('#categoriesFiltersContainer').removeClass('d-none');
          $('#categoriesFiltersCard').html(html);
      } else {
          $('#categoriesFiltersContainer').addClass('d-none');
          $('#categoriesFiltersCard').html('');
      }
  });
});

